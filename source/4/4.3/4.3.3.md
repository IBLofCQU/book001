# 特征匹配损失

训练DCGAN时，判别器输出一个0到1的值表示输入样本是真实样本的概率，生成器的目标是使该判别值最大。可见，我们只是依据判别值指导生成器更新参数，对于生成器来说可参考的信息太少。为了让生成器参考更多的信息，我们尝试使用特征匹配损失。

特征匹配损失可使生成样本与真实样本在判别器中间层输出的特征互相匹配，来改善对抗训练的不稳定性。从判别器的结构来看，整个网络由特征提取层和分类层组成。特征提取层提取输入样本的抽象特征，分类层则将抽象特征映射为一个判别值，完成对输入样本的分类。前面的训练方法我们只是参考了分类层的输出，而使用特征匹配损失可参考特征提取层的输出。分别截取生成样本与真实样本在判别器某一特征提取层的输出特征，并度量这两个抽象特征之间的差距，通过这个差距来指导生成器学习更多信息，使得生成的样本更加真实可靠。

特征匹配损失表示为生成样本在判别器中间层上特征的期望值与真实样本在判别器中间层上特征的期望值的均方误差。具体实现方面，因为特征匹配损失是为了更新生成器的参数，所以仅用于生成器，判别器仍使用原来的二分类交叉熵损失。

特征匹配损失的表达式如下：

